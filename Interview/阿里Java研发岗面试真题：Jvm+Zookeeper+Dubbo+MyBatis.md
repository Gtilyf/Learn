# 阿里Java研发岗面试真题：Jvm+Zookeeper+Dubbo+MyBatis

## ***Jvm面试题***

- **Jvm类加载过程**
- **java内存分配**
- **描述一下Jvm加载class文件的原理机制**
- **GC是什么，为什么要GC**
- **Java中会存在内存泄漏吗，请简单描述**
- **在Java中，对象什么时候可以被垃圾回收**
- **简述Java内存分配与回收策率以及Minor和major GC**
- **JVM的永久代中会发生什么垃圾回收**
- **简述Java垃圾回收机制**

**GC是什么，为什么要GC**  
GC是垃圾收集的意思(GabageCollection),内存处理是编程人员容易出现问题的地方，忘记或者错误的内存回收会导致程序或系统的不稳定甚至崩溃，Java提供的GC功能可以自动监测对象是否超过作用域从而达到自动回收内存的目的，Java 语言没有提供释放已分配内存的显示操作方法.  
**简述Java垃圾回收机制**  
在Java中，程序员是不需要显示的去释放一个对象的内存的，而是由虚拟机自行执行。在JVM中，有一个垃圾回收线程，它是低优先级的，在正常情况下是不会执行的，只有在虚拟机空闲或者当前堆内存不足时，才会触发执行，扫面那些没有被任何引用的对象，并将它们添加到要回收的集合中，进行回收。

## 

***Zookeeper面试题***  

- **Zookeeper是什么**
- **Zookeeper文件系统**
- **Zookeeper提供了什么**
- **四种类型的zonde**
- **Zookeeper集群管理(文件系统，通知机制)**
- **Zookeeper分布式锁(文件系统，通知机制)**
- **Zookeeper工作原理**
- **Zookeeper是如何保证事务的顺序一致性的**
- **Zookeeper是如何选取主leader的**

**Zookeeper文件系统**  
Zookeeper提供一个多层级的节点命名空间(节点称为znode)。与文件系统不同的是，这些节点都可以设置关联的数据，而文件系统中只有文件节点可以存放数据而目录节点不行。Zookeeper为了保证高吞吐和低延迟，在内存中维护了这个树状的目录结构，这种特性使得Zookeeper不能用于存放大量的数据，每个节点的存放数据上限为1M。  
**Zookeeper工作原理**  
Zookeeper的核心是原子广播，这个机制保证了各个Server之间的同步。实现这个机制的协议叫做Zab协议。Zab协议有两种模式，它们分别是恢复模式(选主)和广播模式(同步)。当服务启动或者在领导者崩溃后，Zab 就进入了恢复模式，当领导者被选举出来，且大多数Server完成了和leader的状态同步以后，恢复模式就结束了。状态同步保证了leader 和Server具有相同的系统状态。

## 

***Dubbo***

- **Dubbo服务负载均衡策略?**
- **Dubbo连接注册中心和直连的区别**
- **Dubbo在安全机制方面是如何解决的**
- **Dubbo中zookeeper做注册中心，如果注册中心集群都挂掉发布者和订阅者中间还能通信吗**
- **同一个服务多个注册的情况下可以直连某一个服务吗？**
- **dubbo 在安全机制方面如何解决的？**
- **集群容错怎么做？**
- **在使用过程中都遇到了些什么问题？ 如何解决的？**
- **dubbo 和 dubbox 之间的区别？**

**Dubbo中zookeeper做注册中心，如果注册中心集群都挂掉发布者和订阅者中间还能通信吗**  
可以通信的，启动dubbo时，消费者会从zk拉取注册的生产者的地址接口等数据，缓存在本地。每次调用时，按照本地存储的地址进行调用;注册中心对等集群，任意-台宕机后，将会切换到另一台;注册中心全部宕机后，服务的提供者和消费者仍能通过本地缓存通讯。服务提供者无状态，任一台宕机后，不影响使用;服务提供者全部宕机，服务消费者会无法使用，并无限次重连等待服务者恢复;挂掉是不要紧的，但前提是你没有增加新的服务，如果你要调用新的服务，则是不能办到的。  
**Dubbo在安全机制方面是如何解决的**  
Dubbo通过Token令牌防止用户绕过注册中心直连，然后在注册中心.上管理授权。Dubbo还提供服务黑白名单，来控制服务所允许的调用方

## 

***MyBatis***

- **#{}和${}的区别是什么**
- **MyBatis的好处是什么**
- **MyBatis是否支持延迟加载?如果支持，它的实现原理是什么?**
- **MyBatis和Hibernate有什么区别**
- **什么是MyBatis的接口绑定?有什么好处**
- **MyBatis能执行一对一，一对多的关联查询吗，都有哪些实现方式，以及他们之间的区别**
- **模糊查询like语句该怎么写**
- **MyBatis实现一对一有几种方式，具体怎么操作的**

**#{}和${}的区别是什么**  
1.#{}是预编译处理， $ {}是字符串替换。  
2.Mybatis在处理#}时，会将sql中的#}替换为?号，调用PreparedStatement的set方法来赋值;  
3.Mybatis在处理${} 时，就是把${}替换成变量的值。  
4.使用#{}可以有效的防止SQL注入，提高系统安全性。  

**MyBatis实现一对一有几种方式，具体怎么操作的。**  
有联合查询和嵌套查询联合查询是几个表联合查询，只查询一次通过在resultMap里面配置association 节点配置一对一的类就可以完成;嵌套查询是先查-个表,根据这个表里面的结果的外键id,去再另外-个表里面查询数据,也是通过association 配置,但另外-一个表的查询通过select属性配置
